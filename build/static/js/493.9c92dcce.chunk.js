"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[493],{1775:function(e,t,n){n.d(t,{Z:function(){return f}});var s=n(9439),a=n(1087),o=n(4165),c=n(5861),r=n(5872),i=n(1243),l=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(0,r.Kz)(),e.next=4,i.Z.delete("https://priconne-backend-production.up.railway.app/auth/google/logout/".concat(localStorage.getItem("mongoID"))).then((function(e){console.log(e),localStorage.removeItem("id"),localStorage.getItem("id")||window.location.reload()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),u=n(2791),d=n(184),f=function(e){var t=e.className,n=(0,u.useState)(""),o=(0,s.Z)(n,2),c=o[0],r=o[1];return(0,d.jsxs)("header",{className:"flex column alignItems ".concat(t),id:"auth",children:[(0,d.jsx)("h1",{children:"Priconnect"}),(0,d.jsx)("button",{className:"button fa-solid fa-bars",id:"menu",onClick:function(){return r("nav")}}),(0,d.jsxs)("nav",{id:c,className:"nav",children:[(0,d.jsx)("button",{className:"button fa-solid fa-xmark",id:"close",onClick:function(){return r("")}}),(0,d.jsxs)("ul",{className:"flex alignItems",children:[(0,d.jsx)("li",{children:(0,d.jsx)(a.rU,{className:"button",to:"/",children:"Home"})}),(0,d.jsx)("li",{children:(0,d.jsx)(a.rU,{className:"button",to:"/dashboard",children:"Dashboard"})}),(0,d.jsx)("li",{children:(0,d.jsx)(a.rU,{className:"button",to:"/account",children:"Account"})}),(0,d.jsx)("li",{children:(0,d.jsx)(a.rU,{className:"button",to:"/post",children:"Post"})}),(0,d.jsx)("li",{children:(0,d.jsx)(a.rU,{className:"button",to:"/comics",children:"Comics"})}),(0,d.jsx)("li",{children:(0,d.jsx)("button",{className:"button",onClick:function(){return l()},children:"Logout"})})]})]})]})}},5729:function(e,t,n){n.d(t,{Z:function(){return f}});var s=n(9439),a=n(1087),o=n(4165),c=n(5861),r=n(5872),i=n(1243),l=n(184),u=function(){var e=(0,r.Nq)({onSuccess:function(){var e=(0,c.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:"Bearer ".concat(t.access_token)}}).then((function(e){return e.data}));case 3:if(!(n=e.sent)){e.next=7;break}return e.next=7,i.Z.post("https://priconne-backend-production.up.railway.app/auth/google/refresh-token",{userInfo:n,tokenResponse:t}).then((function(e){localStorage.setItem("mongoID",e.data.user._id),localStorage.setItem("id",n.sub),window.location.reload()}));case 7:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){return console.error(e)}});return(0,l.jsxs)("a",{href:"/",className:"button",onClick:function(t){t.preventDefault(),e()},children:[(0,l.jsx)("i",{className:"fab fa-google left"})," Login"]})},d=n(2791),f=function(e){var t=e.className,n=(0,d.useState)(""),o=(0,s.Z)(n,2),c=o[0],r=o[1];return(0,l.jsxs)("header",{className:"flex column alignItems ".concat(t),id:"header",children:[(0,l.jsx)("h1",{children:"Priconnect"}),"nav"!==c?(0,l.jsx)("button",{className:"button fa-solid fa-bars",id:"menu",onClick:function(){return r("nav")}}):(0,l.jsx)("button",{className:"button fa-solid fa-xmark",id:"close",onClick:function(){return r("")}}),(0,l.jsx)("nav",{id:c,className:"nav",children:(0,l.jsxs)("ul",{className:"flex alignItems",children:[(0,l.jsx)("li",{children:(0,l.jsx)(a.rU,{className:"button",to:"/",children:"Home"})}),(0,l.jsx)("li",{children:(0,l.jsx)(a.rU,{className:"button",to:"/dashboard",children:"Dashboard"})}),(0,l.jsx)("li",{children:(0,l.jsx)(a.rU,{className:"button",to:"/comics",children:"Comics"})}),(0,l.jsx)("li",{children:(0,l.jsx)(u,{})})]})})]})}},4327:function(e,t,n){n.d(t,{fn:function(){return r},fy:function(){return c},ol:function(){return l},q0:function(){return i}});var s=n(4165),a=n(5861),o=n(1243),c=function(e){return e.length>150?e.substring(0,152)+"...":e},r=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t,n){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,o.Z.delete("https://priconne-backend-production.up.railway.app/deletePost/".concat(n));case 4:a=e.sent,console.log(a.data),window.location.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t,n){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,o.Z.put("https://priconne-backend-production.up.railway.app/addLike/".concat(n));case 4:a=e.sent,console.log(a.data),window.location.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t,n,a){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.preventDefault(),localStorage.setItem("postId",n),a("/comments")}catch(s){console.error(s)}case 1:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}()},2493:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var s=n(5729),a=n(7762),o=n(4165),c=n(5861),r=n(9439),i=n(4327),l=n(9085),u=n(1243),d=n(1087),f=n(2791),h=n(184),m=function(){var e=(0,f.useState)([]),t=(0,r.Z)(e,2),n=t[0],s=t[1],m=(0,f.useState)([]),p=(0,r.Z)(m,2),x=p[0],j=p[1],g=(0,f.useState)([]),v=(0,r.Z)(g,2),b=v[0],N=v[1],k=(0,f.useCallback)((0,c.Z)((0,o.Z)().mark((function e(){var t,n,s,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([u.Z.get("https://priconne-backend-production.up.railway.app/api/posts"),u.Z.get("https://priconne-backend-production.up.railway.app/api/users")]);case 2:t=e.sent,n=(0,r.Z)(t,2),s=n[0],a=n[1],j(s.data),N(a.data);case 8:case"end":return e.stop()}}),e)}))),[j,N]);(0,f.useEffect)((function(){k()}),[k]);var w=(0,f.useCallback)((function(){var e,t=new Map,n=(0,a.Z)(b);try{for(n.s();!(e=n.n()).done;){var s=e.value;t.set(s.googleId,s)}}catch(c){n.e(c)}finally{n.f()}var o=[];return x.forEach((function(e){var n=t.get(e.user);"public"===e.status&&o.push((0,h.jsxs)("section",{className:"post flex",children:[(0,h.jsx)(d.rU,{to:"/viewPost",className:"image flex justifyContent alignItems",children:(0,h.jsx)("img",{src:e.post,alt:"Post of ".concat(e.title),onClick:function(){return localStorage.setItem("postId",e._id)}})}),(0,h.jsxs)("section",{className:"rightAlign",children:[(0,h.jsx)("h2",{children:e.title}),n&&(0,h.jsxs)("h4",{children:["By: ",n.displayName]}),(0,h.jsxs)("div",{className:"icons flex",children:[(0,h.jsx)("button",{className:"button",onClick:function(){return l.Am.error("Login to like posts")},children:(0,h.jsx)("i",{className:"fa-solid fa-thumbs-up",children:(0,h.jsx)("span",{children:e.likes})})}),(0,h.jsx)(d.rU,{to:"/comments",className:"button",onClick:function(){return localStorage.setItem("postId",e._id)},children:(0,h.jsx)("i",{className:"fa-solid fa-comment",children:(0,h.jsx)("span",{children:e.comments.length})})}),(0,h.jsx)(d.rU,{to:"/viewPost",className:"button",onClick:function(){return localStorage.setItem("postId",e._id)},children:"View"})]}),(0,h.jsx)("div",{className:"flex buttons",children:(0,h.jsx)("p",{children:(0,i.fy)(e.description)})})]})]},e._id))})),o}),[x,b]);return(0,f.useEffect)((function(){s(w())}),[w]),n},p=function(){return(0,h.jsxs)("main",{className:"flex column justifyContent",id:"show",children:[(0,h.jsx)(s.Z,{className:"pages"}),(0,h.jsx)("h1",{className:"justifyContent flex",children:"Dashboard"}),(0,h.jsx)("h2",{className:"justifyContent flex",children:"Click the image/button to view it!"}),(0,h.jsx)("section",{className:"posts flex alignItems column",children:(0,h.jsx)(m,{})})]})},x=n(1775),j=f.memo((function(){var e=(0,f.useState)([]),t=(0,r.Z)(e,2),n=t[0],s=t[1],a=(0,f.useState)(!0),m=(0,r.Z)(a,2),p=m[0],x=m[1],j=(0,f.useState)([]),g=(0,r.Z)(j,2),v=g[0],b=g[1],N=(0,f.useCallback)((0,c.Z)((0,o.Z)().mark((function e(){var t,n,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([u.Z.get("https://priconne-backend-production.up.railway.app/api/posts")]);case 3:t=e.sent,n=(0,r.Z)(t,1),s=n[0],console.log(s.data),b(s.data),x(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),k=(0,f.useCallback)((function(e,t){(0,i.fn)(e,t)}),[]),w=(0,f.useCallback)((function(e,t){(0,i.q0)(e,t)}),[]);return(0,f.useMemo)((function(){return N()}),[N]),(0,f.useMemo)((function(){try{var e=[];v.forEach((function(t){t.user===localStorage.getItem("id")?e.push((0,h.jsxs)("section",{className:"post flex",children:[(0,h.jsx)(d.rU,{to:"/viewPost",className:"image flex alignItems justifyContent",children:(0,h.jsx)("img",{src:t.post,alt:"Post of ".concat(t.title),onClick:function(){return localStorage.setItem("postId",t._id)}})}),(0,h.jsxs)("section",{className:"rightAlign",children:[(0,h.jsx)("h2",{children:t.title}),(0,h.jsxs)("h4",{children:["By ",t.displayName]}),(0,h.jsxs)("div",{className:"icons flex",children:[(0,h.jsxs)("div",{className:"icons-row1",children:[(0,h.jsx)("button",{className:"fa-solid fa-trash button",onClick:function(e){return k(e,t._id)}}),(0,h.jsx)(d.rU,{to:"/editPost",className:"fa-solid fa-pen-to-square button",onClick:function(){return localStorage.setItem("postId",t._id)}})]}),(0,h.jsxs)("div",{className:"icons-row2",children:[(0,h.jsx)("section",{className:"button",onClick:function(e){e.preventDefault(),l.Am.error("Cannot Like Own Post")},children:(0,h.jsx)("i",{className:"fa-solid fa-thumbs-up",children:(0,h.jsx)("span",{children:t.likes})})}),(0,h.jsx)(d.rU,{to:"/comments",className:"button",onClick:function(){return localStorage.setItem("postId",t._id)},children:(0,h.jsx)("i",{className:"fa-solid fa-comment",children:(0,h.jsx)("span",{children:t.comments.length})})})]}),(0,h.jsx)(d.rU,{to:"/viewPost",className:"button",onClick:function(){return localStorage.setItem("postId",t._id)},children:"View"})]}),(0,h.jsx)("div",{className:"flex buttons",children:(0,h.jsx)("p",{children:(0,i.fy)(t.description)})})]})]},t._id)):"public"===t.status&&e.push((0,h.jsxs)("section",{className:"post flex",children:[(0,h.jsx)("div",{className:"image",children:(0,h.jsx)(d.rU,{to:"/viewPost",children:(0,h.jsx)("img",{src:t.post,alt:"Post of ".concat(t.title),onClick:function(){return localStorage.setItem("postId",t._id)}})})}),(0,h.jsxs)("section",{className:"rightAlign",children:[(0,h.jsx)("h2",{children:t.title}),(0,h.jsxs)("h4",{children:["By ",t.displayName]}),(0,h.jsxs)("div",{className:"icons flex",children:[(0,h.jsx)("section",{className:"button",onClick:function(e){return w(e,t._id)},children:(0,h.jsx)("i",{className:"fa-solid fa-thumbs-up",children:(0,h.jsx)("span",{children:t.likes})})}),(0,h.jsx)(d.rU,{to:"/comments",className:"button",onClick:function(){return localStorage.setItem("postId",t._id)},children:(0,h.jsx)("i",{className:"fa-solid fa-comment",children:(0,h.jsx)("span",{children:t.comments.length})})}),(0,h.jsx)(d.rU,{to:"/viewPost",className:"button",onClick:function(){return localStorage.setItem("postId",t._id)},children:"View"})]}),(0,h.jsx)("div",{className:"flex buttons",children:(0,h.jsx)("p",{children:(0,i.fy)(t.description)})})]})]},t._id)),x(!1)})),s(e)}catch(t){console.error(t)}}),[v,k,w]),p?(0,h.jsx)("h1",{children:"Loading..."}):n})),g=function(){return(0,h.jsxs)("main",{className:"flex column justifyContent",id:"show",children:[(0,h.jsx)(x.Z,{className:"pages"}),(0,h.jsx)("h1",{className:"justifyContent flex",children:"Dashboard"}),(0,h.jsx)("h2",{className:"justifyContent flex",children:"Click the image/link to view the post!"}),(0,h.jsx)("section",{className:"posts flex alignItems column",children:(0,h.jsx)(j,{})})]})},v=function(){return localStorage.getItem("id")?(0,h.jsx)(g,{}):(0,h.jsx)(p,{})}}}]);
//# sourceMappingURL=493.9c92dcce.chunk.js.map